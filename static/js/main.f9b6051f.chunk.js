(this["webpackJsonpgoit-react-hw-04-hooks-image-finder"]=this["webpackJsonpgoit-react-hw-04-hooks-image-finder"]||[]).push([[0],{12:function(e,t,n){e.exports={info:"Notification_info__3hJal"}},18:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),o=n(3),i=n.n(o),s=(n(18),n(2)),u=n(7);n(19);var j=function(e){var t=e.onSubmit,n=Object(r.useState)(""),a=Object(s.a)(n,2),o=a[0],i=a[1];return Object(c.jsx)("header",{className:"Searchbar",children:Object(c.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==o.trim()?t(o):u.b.warn("Input search Query"),i("")},children:[Object(c.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(c.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(c.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:o,onChange:function(e){var t=e.target;return i(t.value)}})]})})},l=n(10),b="https://pixabay.com/api/?image_type=photo&orientation=horizontal",m=12,d="19532775-cd1fec64673db4c80a00103d2";var h=n(12),O=n.n(h);function f(e){var t=e.text;return Object(c.jsx)("h1",{className:O.a.info,children:t})}var p=function(e){var t=e.src,n=e.alt,a=e.onClose;return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.code&&a()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[a]),Object(o.createPortal)(Object(c.jsx)("div",{className:"Overlay",onClick:function(e){e.target,e.currentTarget;a()},children:Object(c.jsx)("div",{className:"Modal",children:Object(c.jsx)("img",{src:t,alt:n})})}),document.querySelector("#modal-root"))};var g=function(e){var t=e.src,n=e.alt,a=e.fullSize,o=Object(r.useState)(!1),i=Object(s.a)(o,2),u=i[0],j=i[1],l=function(){return j(!u)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:t,alt:n,onClick:l,className:"ImageGalleryItem-image"}),u&&Object(c.jsx)(p,{onClose:l,src:a,alt:n})]})};var x=function(e){var t=e.imgArray;return Object(c.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,n=e.webformatURL,r=e.largeImageURL,a=e.tags;return Object(c.jsx)("li",{className:"ImageGalleryItem",children:Object(c.jsx)(g,{src:n,alt:a,fullSize:r})},t+n)}))})},v=n(9),S=n(5),y=n.n(S);var w=function(e){var t=e.onClickFetch,n=void 0===t?null:t,r=e.type,a=void 0===r?"more":r;return"hidden"===a?Object(c.jsx)(c.Fragment,{}):"more"===a?Object(c.jsx)("button",{className:y.a.button,type:"button",onClick:n,children:"Load More"}):"spinner"===a?Object(c.jsx)(v.a,{size:"36",className:y.a.iconSpin}):"loading"===a?Object(c.jsxs)("button",{className:y.a.button,type:"button",children:[Object(c.jsx)("span",{children:Object(c.jsx)(v.a,{size:"16",className:y.a.iconSpinBtn})}),Object(c.jsx)("span",{children:"Loading..."})]}):void 0},_="idle",N="pending",k="rejected",F="resolved";var C=function(e){var t=e.searchQuery,n=Object(r.useState)(_),a=Object(s.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)([]),j=Object(s.a)(u,2),h=j[0],O=j[1],p=Object(r.useState)(0),g=Object(s.a)(p,2),v=g[0],S=g[1],y=Object(r.useState)(1),C=Object(s.a)(y,2),E=C[0],I=C[1],B=Object(r.useState)(""),L=Object(s.a)(B,2),R=L[0],z=L[1];Object(r.useEffect)((function(){A()}),[t]);var T=Object(r.useRef)("");Object(r.useEffect)((function(){t.trim()&&(T.current||(T.current=t),T.current===t?(i(N),setTimeout((function(){(function(e,t){var n="".concat(b,"&q=").concat(e,"&page=").concat(t,"&per_page=").concat(m,"&key=").concat(d);return fetch(n).then((function(t){return t.ok?t.json():Promise.reject(new Error("There is no image with tag ".concat(e)))}))})(t,E).then((function(e){var n=e.hits,c=e.totalHits;if(0===n.length)return Promise.reject(new Error("There is no image with tag: ".concat(t)));O((function(e){return[].concat(Object(l.a)(e),Object(l.a)(n))})),S(c),i(F)})).catch((function(e){z(e),i(k)}))}),500)):T.current=t)}),[E,t]),Object(r.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[h,o]);var A=function(){i(_),O([]),S(0),I(1),z("")},Q=o===N&&1===E?"spinner":o===N&&E>1?"loading":h.length>=v?"hidden":"more";return o===_?Object(c.jsx)(f,{text:"Input tag to find images"}):o===N?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(x,{imgArray:h}),Object(c.jsx)(w,{type:Q})]}):o===k?Object(c.jsx)(f,{text:R.message}):o===F?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(x,{imgArray:h}),Object(c.jsx)(w,{type:Q,onClickFetch:function(){return I((function(e){return e+1}))}})]}):void 0};var E=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(j,{onSubmit:a}),Object(c.jsx)(C,{searchQuery:n}),Object(c.jsx)(u.a,{autoClose:3e3})]})},I=document.querySelector("#root");i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(E,{})}),I)},5:function(e,t,n){e.exports={button:"Button_button__3QF_k",iconSpin:"Button_iconSpin__3vRRA","icon-spin":"Button_icon-spin__18vUR",iconSpinBtn:"Button_iconSpinBtn__3d432"}}},[[22,1,2]]]);
//# sourceMappingURL=main.f9b6051f.chunk.js.map